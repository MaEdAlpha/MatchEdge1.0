
<button mat-icon-button class="setting-btn" [disableRipple]="true" (click)="toggleSideNav()"><mat-icon>settings</mat-icon></button>
<app-view-table-sidenav></app-view-table-sidenav>
<div class="mn-display">
  <app-top-layer-filters (hideTable)="displaySelectedTable($event)"></app-top-layer-filters>

        <div class="fixturesTable" [style.visibility]="tableSelected == 1 ? 'visible' : 'collapse' " [style.height]="tableSelected == 1 ? '' : '0px' " [style.margin-bottom]="tableSelected == 1 ? '5px' : '0'" [style.display]="tableSelected == 1 ? 'inline' : '' ">
          <mat-table mat-table [dataSource] ="dataSource">
            <!-- Generate Column Headers -->
               <ng-container *ngFor="let column of columns" matColumnDef= {{column.field}}>

                    <ng-container *ngIf="!column.field.startsWith('B') || !column.field.startsWith('SM')">
                      <mat-header-cell *matHeaderCellDef> </mat-header-cell>
                    </ng-container>
                    <!-- Generate Data Cells -->
                    <mat-cell *matCellDef="let row; let i = index">
                      <!-- TODO filter by dates epoch time is less than time.now epoch time then do not display. -->
                      <!-- <ng-container *ngIf="oldNews(row['EpochTime'])"> -->

                        <ng-container *ngIf="!column.field.endsWith('Status')">
                          <ng-container *ngIf="column.field.endsWith('BHome') || column.field.endsWith('SMHome') || column.field.endsWith('OccH') || column.field.endsWith('OccA') || column.field.endsWith('BAway') || column.field.endsWith('SMAway')">
                            <div class="odds-container">
                              <ng-container *ngIf="column.field.endsWith('BHome') || column.field.endsWith('BAway')" > <img class="bookie-logo" src="/assets/img/betIconIII.png" alt=""></ng-container>
                              <ng-container *ngIf="column.field.endsWith('SMHome') || column.field.endsWith('SMAway') " > <img class="exchange-logo" src="/assets/img/smarketsIcon.png" alt=""></ng-container>
                              <span class="{{column.field}} viewCell"> {{ row[column.field] | number:'0.2-2'}}</span>
                            </div>
                          </ng-container>

                          <ng-container *ngIf="column.field.startsWith('Home') || column.field.startsWith('Away') ">
                            <span class="{{column.field}} viewCell"> {{ row[column.field] }}</span>
                          </ng-container>

                          <ng-container *ngIf="column.field.startsWith('FixturesDate')">
                            <button mat-raised-button class="fixturesDateBtn" [style.background]="row.isWatched ? 'rgb(249, 168, 37)' : 'rgb(195, 195, 195)'"(click)="addToWatchList(row);">
                              <div class="fixturesText">
                                <div class="fixturesDate"> {{row[column.field]}} </div>
                                <div class="fixturesTime"> {{row['FixturesTime']}} </div>
                              </div>
                            </button>
                          </ng-container>
                        </ng-container>

                        <ng-container *ngIf="column.field.endsWith('Status')">
                          <div class="dirStatusContainer">
                            <ng-container *ngIf="column.field.endsWith('HStatus')">
                              <ng-container>
                                <button mat-icon-button
                                  (click)="row.HStatus.notify=!row.HStatus.notify"
                                  class="{{column.field}} viewCell">
                                  <mat-icon>
                                    add_alert
                                  </mat-icon>
                                </button>
                              </ng-container>

                              <ng-container >
                                <button mat-icon-button
                                  class="{{column.field}} viewCell"
                                  (click)="ignoreHomeSelection(row)"
                                  appIgnoreIcon
                                  [ignoreStatus]="row.HStatus.ignore">
                                  <mat-icon>
                                    block
                                  </mat-icon>
                                </button>
                              </ng-container>

                              <ng-container>
                                <button mat-icon-button
                                  class="{{column.field}} viewCell"
                                  (click)="row.HStatus.bet=!row.HStatus.activeBet"
                                  appBetHome [hBetStatus]="row.HStatus.activeBet"
                                  id="hStatusMoney">
                                  <mat-icon>
                                    attach_money
                                  </mat-icon>
                              </button>
                              </ng-container>
                            </ng-container>

                            <!-- AWAY STATUS CONFIG -->
                            <ng-container *ngIf="column.field.endsWith('AStatus')">
                              <ng-container>
                                <button mat-icon-button
                                  (click)="row.AStatus.notify=!row.AStatus.notify"
                                  class="{{column.field}} viewCell">
                                  <mat-icon>
                                    add_alert
                                  </mat-icon>
                                </button>
                              </ng-container>

                              <ng-container >
                                <button mat-icon-button
                                  class="{{column.field}} viewCell"
                                  (click)="ignoreAwaySelection(row)"
                                  appIgnoreIcon
                                  [ignoreStatus]="row.AStatus.ignore">
                                  <mat-icon>
                                    block
                                  </mat-icon>
                                </button>
                              </ng-container>

                              <ng-container>
                                <button mat-icon-button
                                  class="{{column.field}} viewCell"
                                  appBetAway
                                  (click)="row.AStatus.bet=!row.AStatus.activeBet"
                                  appBetAway [aBetStatus]="row.AStatus.activeBet"
                                  id="hStatusMoney">
                                  <mat-icon>
                                    attach_money
                                  </mat-icon>
                              </button>
                              </ng-container>
                            </ng-container>
                          </div>

                      </ng-container>

                    <!-- </ng-container> -->
                    </mat-cell>
                </ng-container>


                  <!--DOES NOTHING APPARENTLY. Keep for debug purposes for now <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row> -->
                    <mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
                      <!-- Display group header -->
                      <ng-container class="groupHeaderCont" matColumnDef="groupHeader">
                        <mat-cell colspan="10" *matCellDef="let group">
                          <div class="leagueGroupContainer">
                            <h2>{{group[groupByColumns[0]]}}</h2>
                            <mat-slide-toggle
                            class="leagueToggleSelect"
                            [(ngModel)]="!group.ignoreAll"
                            (change) = "openPopUp($event, group)"
                            (click)="collapseGroup(group); $event.stopPropagation()"></mat-slide-toggle>
                          </div>
                        </mat-cell>
                      </ng-container>
            <mat-row *matRowDef="let row; columns: ['groupHeader']; when: isGroup;" (click)="displayMatches(row)"></mat-row>
          </mat-table>
        </div>

        <!-- Display WatchList -->
        <div [style.visibility]="tableSelected == 2 ? 'visible' : 'collapse' "[style.height]="tableSelected == 2 ? ' ' : '0' " [style.margin-bottom]="tableSelected == 2 ? '5px' : '0'" [style.display]="tableSelected == 2 ? 'inline' : '' ">
          <app-watchlist (hideTable)="displaySelectedTable($event)"></app-watchlist>
        </div>

        <!-- Display Juicy Table -->
        <div [style.visibility]="tableSelected == 3 ? 'visible' : 'collapse' "[style.height]="tableSelected == 3 ? ' ' : '0' " [style.margin-bottom]="tableSelected == 3 ? '5px' : '0'" [style.display]="tableSelected == 3 ? 'inline' : '' ">
          <app-juicy-match [allMatches] ="matches" [selectionToIgnore]="ignoreList"></app-juicy-match>
        </div>
        <!-- Display Active Bets -->
        <div [style.visibility]="tableSelected == 4 ? 'visible' : 'collapse' "[style.height]="tableSelected == 4 ? ' ' : '0' " [style.margin-bottom]="tableSelected == 4 ? '5px' : '0'" [style.display]="tableSelected == 4 ? 'inline' : '' ">
          <p>Active</p>
        </div>
</div>


    <hr id="footer">

    <div class="footer-container">
      <p>Fill footer info here</p>
    </div>

